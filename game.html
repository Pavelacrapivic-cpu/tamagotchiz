<!DOCTYPE html>
<html>

<head>
    <title>üêâ –ú–∞–ª–µ–Ω—å–∫–∏–π –î—Ä–∞–∫–æ—à–∞</title>
    <meta charset="UTF-8">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden;
            height: 100vh;
            position: relative;
        }

        .scene-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .ui-panel {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(20px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 25px;
            padding: 25px;
            z-index: 100;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            min-width: 500px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-item {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 15px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
        }

        .stat-item:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .stat-value {
            font-size: 1.4em;
            font-weight: bold;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .stat-label {
            font-size: 0.9em;
            color: rgba(255, 255, 255, 0.9);
            margin-top: 5px;
        }

        .actions-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
        }

        .action-btn {
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
            border: none;
            padding: 18px;
            border-radius: 15px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            font-size: 1.1em;
            position: relative;
            overflow: hidden;
        }

        .action-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s;
        }

        .action-btn:hover::before {
            left: 100%;
        }

        .action-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.3);
        }

        .action-btn:active {
            transform: translateY(0) scale(0.98);
        }

        .mood-display {
            position: absolute;
            top: 30px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 4em;
            z-index: 100;
            text-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {

            0%,
            100% {
                transform: translateX(-50%) translateY(0px);
            }

            50% {
                transform: translateX(-50%) translateY(-10px);
            }
        }

        .thought-bubble {
            position: absolute;
            top: 120px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.95);
            padding: 15px 25px;
            border-radius: 25px;
            font-size: 1.2em;
            z-index: 100;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .thought-bubble::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            border-width: 10px 10px 0;
            border-style: solid;
            border-color: rgba(255, 255, 255, 0.95) transparent transparent;
        }

        .environment {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 150px;
            background: linear-gradient(to top, #8BC34A, #689F38);
            z-index: 2;
        }

        .grass {
            position: absolute;
            bottom: 150px;
            width: 100%;
            height: 30px;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 20"><path d="M0,20 Q25,5 50,20 T100,20 L100,0 L0,0 Z" fill="%237CB342"/></svg>') repeat-x;
        }

        .floating-objects {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 3;
        }

        .floating-object {
            position: absolute;
            font-size: 2em;
            animation: float-around 15s linear infinite;
        }

        @keyframes float-around {
            0% {
                transform: translate(0, 0) rotate(0deg);
            }

            25% {
                transform: translate(100px, 50px) rotate(90deg);
            }

            50% {
                transform: translate(50px, 100px) rotate(180deg);
            }

            75% {
                transform: translate(-50px, 75px) rotate(270deg);
            }

            100% {
                transform: translate(0, 0) rotate(360deg);
            }
        }
    </style>
</head>

<body>
    <div class="mood-display" id="mood">üê≤</div>
    <div class="thought-bubble" id="thought">–ü—Ä–∏–≤–µ—Ç! –Ø –º–∞–ª–µ–Ω—å–∫–∏–π –¥—Ä–∞–∫–æ—à–∞!</div>

    <div class="scene-container" id="scene"></div>

    <div class="floating-objects">
        <div class="floating-object" style="top:20%; left:10%;">üåº</div>
        <div class="floating-object" style="top:30%; left:80%;">üçÉ</div>
        <div class="floating-object" style="top:60%; left:15%;">‚ú®</div>
        <div class="floating-object" style="top:40%; left:70%;">üåü</div>
    </div>

    <div class="environment">
        <div class="grass"></div>
    </div>

    <div class="ui-panel">
        <div class="stats-grid">
            <div class="stat-item">
                <div class="stat-value" id="hunger">50</div>
                <div class="stat-label">üçñ –ì–æ–ª–æ–¥</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="happiness">70</div>
                <div class="stat-label">üòä –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="energy">80</div>
                <div class="stat-label">üí§ –≠–Ω–µ—Ä–≥–∏—è</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="cleanliness">60</div>
                <div class="stat-label">‚ú® –ß–∏—Å—Ç–æ—Ç–∞</div>
            </div>
        </div>

        <div class="actions-grid">
            <button class="action-btn" onclick="feed()">üçñ –ü–æ–∫–æ—Ä–º–∏—Ç—å</button>
            <button class="action-btn" onclick="play()">üéÆ –ò–≥—Ä–∞—Ç—å</button>
            <button class="action-btn" onclick="sleep()">üí§ –£–ª–æ–∂–∏—Ç—å —Å–ø–∞—Ç—å</button>
            <button class="action-btn" onclick="clean()">üõÅ –ü–æ—á–∏—Å—Ç–∏—Ç—å</button>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    <script>
        // –°–ª–æ–∂–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —ç–º–æ—Ü–∏–π –∏ –∞–Ω–∏–º–∞—Ü–∏–π
        class AnimatedPet {
            constructor() {
                this.stats = {
                    hunger: 50,
                    happiness: 70,
                    energy: 80,
                    cleanliness: 60
                };
                this.mood = 'happy';
                this.currentAction = 'idle';
                this.thoughts = [
                    "–ü—Ä–∏–≤–µ—Ç! –Ø –º–∞–ª–µ–Ω—å–∫–∏–π –¥—Ä–∞–∫–æ—à–∞!",
                    "–Ø —Ç–∞–∫–æ–π —Å—á–∞—Å—Ç–ª–∏–≤—ã–π!",
                    "–•–æ—á—É –∫—É—à–∞—Ç—å...",
                    "–ü–æ–∏–≥—Ä–∞–π —Å–æ –º–Ω–æ–π!",
                    "–Ø —É—Å—Ç–∞–ª...",
                    "–¢–∞–∫ –ø—Ä–∏—è—Ç–Ω–æ –∏ —á–∏—Å—Ç–æ!",
                    "–ù—è–º-–Ω—è–º! –í–∫—É—Å–Ω–æ!",
                    "–£—Ä–∞! –ò–≥—Ä–∞—Ç—å!",
                    "Zzz... –°–ª–∞–¥–∫–∏–µ —Å–Ω—ã...",
                    "–§—É—Ö, —Ç–µ–ø–µ—Ä—å —è —á–∏—Å—Ç–µ–Ω—å–∫–∏–π!"
                ];
            }

            updateStats() {
                // –ë–æ–ª–µ–µ —Å–ª–æ–∂–Ω–∞—è –¥–µ–≥—Ä–∞–¥–∞—Ü–∏—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫
                const decay = {
                    hunger: 0.8,
                    happiness: 0.6,
                    energy: 0.7,
                    cleanliness: 0.5
                };

                Object.keys(this.stats).forEach(stat => {
                    this.stats[stat] = Math.max(0, this.stats[stat] - decay[stat]);
                });

                this.updateMood();
            }

            updateMood() {
                const { hunger, happiness, energy, cleanliness } = this.stats;

                if (hunger < 20) this.mood = 'hungry';
                else if (energy < 20) this.mood = 'sleepy';
                else if (happiness > 80) this.mood = 'veryHappy';
                else if (happiness > 60) this.mood = 'happy';
                else if (cleanliness < 30) this.mood = 'dirty';
                else this.mood = 'normal';
            }

            performAction(action) {
                this.currentAction = action;

                switch (action) {
                    case 'feed':
                        this.stats.hunger = Math.min(100, this.stats.hunger + 30);
                        this.stats.cleanliness = Math.max(0, this.stats.cleanliness - 8);
                        this.showThought("–ù—è–º-–Ω—è–º! –¢–∞–∫ –≤–∫—É—Å–Ω–æ! üçñ");
                        break;
                    case 'play':
                        this.stats.happiness = Math.min(100, this.stats.happiness + 25);
                        this.stats.energy = Math.max(0, this.stats.energy - 15);
                        this.stats.hunger = Math.max(0, this.stats.hunger - 10);
                        this.showThought("–£—Ä–∞! –ò–≥—Ä–∞—Ç—å –≤–µ—Å–µ–ª–æ! üéÆ");
                        break;
                    case 'sleep':
                        this.stats.energy = Math.min(100, this.stats.energy + 40);
                        this.stats.hunger = Math.max(0, this.stats.hunger - 15);
                        this.showThought("Zzz... –°–ª–∞–¥–∫–∏–µ —Å–Ω—ã... üí§");
                        break;
                    case 'clean':
                        this.stats.cleanliness = Math.min(100, this.stats.cleanliness + 35);
                        this.stats.happiness = Math.min(100, this.stats.happiness + 15);
                        this.showThought("–§—É—Ö, —Ç–µ–ø–µ—Ä—å —è —á–∏—Å—Ç–µ–Ω—å–∫–∏–π! ‚ú®");
                        break;
                }

                this.updateMood();
            }

            showThought(text) {
                const bubble = document.getElementById('thought');
                bubble.textContent = text;
                bubble.style.opacity = '1';

                setTimeout(() => {
                    bubble.style.opacity = '0';
                }, 3000);
            }

            getMoodEmoji() {
                const emojis = {
                    'veryHappy': 'üòÑ',
                    'happy': 'üòä',
                    'normal': 'üòê',
                    'hungry': 'üçñ',
                    'sleepy': 'üí§',
                    'dirty': 'üí©'
                };
                return emojis[this.mood] || 'üê≤';
            }
        }

        // –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è 3D –≥—Ä–∞—Ñ–∏–∫–∞
        class AdvancedPetScene {
            constructor() {
                this.scene = new THREE.Scene();
                this.camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
                this.renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
                this.pet = new THREE.Group();
                this.clock = new THREE.Clock();

                this.morphTargets = {};
                this.animations = {};
                this.currentAnimation = null;

                this.init();
            }

            init() {
                // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ–Ω–¥–µ—Ä–µ—Ä–∞
                this.renderer.setSize(window.innerWidth, window.innerHeight);
                this.renderer.setClearColor(0x000000, 0);
                this.renderer.shadowMap.enabled = true;
                this.renderer.shadowMap.type = THREE.PCFSoftShadowMap;
                document.getElementById('scene').appendChild(this.renderer.domElement);

                // –ö–∞–º–µ—Ä–∞
                this.camera.position.set(0, 1, 8);
                this.camera.lookAt(0, 0, 0);

                // –û—Å–≤–µ—â–µ–Ω–∏–µ –∫–∞–∫ –≤ –º—É–ª—å—Ç—Ñ–∏–ª—å–º–∞—Ö
                this.setupCinematicLighting();

                // –°–æ–∑–¥–∞–Ω–∏–µ –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–∏—Ç–æ–º—Ü–∞
                this.createDetailedPet();

                // –û–∫—Ä—É–∂–µ–Ω–∏–µ
                this.createEnvironment();

                this.animate();
                window.addEventListener('resize', () => this.onWindowResize());
            }

            setupCinematicLighting() {
                // –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª—é—á–µ–≤–æ–π —Å–≤–µ—Ç
                const keyLight = new THREE.DirectionalLight(0xfff4e6, 1.2);
                keyLight.position.set(5, 8, 5);
                keyLight.castShadow = true;
                keyLight.shadow.mapSize.width = 2048;
                keyLight.shadow.mapSize.height = 2048;
                this.scene.add(keyLight);

                // –ó–∞–ø–æ–ª–Ω—è—é—â–∏–π —Å–≤–µ—Ç
                const fillLight = new THREE.DirectionalLight(0x4ecdc4, 0.4);
                fillLight.position.set(-5, 3, 3);
                this.scene.add(fillLight);

                // –ö–æ–Ω—Ç—Ä–æ–≤–æ–π —Å–≤–µ—Ç
                const backLight = new THREE.DirectionalLight(0xff6b6b, 0.3);
                backLight.position.set(0, 5, -5);
                this.scene.add(backLight);

                // Ambient light –¥–ª—è –º—è–≥–∫–∏—Ö —Ç–µ–Ω–µ–π
                const ambient = new THREE.AmbientLight(0x404040, 0.6);
                this.scene.add(ambient);
            }

            createDetailedPet() {
                // –¢–µ–ª–æ - —Å—Ñ–µ—Ä–∞ —Å subdivision –¥–ª—è smooth shading
                const bodyGeometry = new THREE.SphereGeometry(1, 32, 32);
                bodyGeometry.scale(1, 1.3, 0.9);

                const bodyMaterial = new THREE.MeshPhongMaterial({
                    color: 0xFF6B6B,
                    shininess: 100,
                    specular: 0x222222,
                    flatShading: false
                });

                const body = new THREE.Mesh(bodyGeometry, bodyMaterial);
                body.castShadow = true;
                body.receiveShadow = true;
                this.pet.add(body);

                // –ì–æ–ª–æ–≤–∞
                const headGeometry = new THREE.SphereGeometry(0.7, 32, 32);
                const head = new THREE.Mesh(headGeometry, bodyMaterial);
                head.position.y = 1.5;
                head.castShadow = true;
                this.pet.add(head);

                // –ë–æ–ª—å—à–∏–µ –≤—ã—Ä–∞–∑–∏—Ç–µ–ª—å–Ω—ã–µ –≥–ª–∞–∑–∞
                this.createEyes();

                // –ú–∏–ª—ã–π –Ω–æ—Å–∏–∫
                const noseGeometry = new THREE.SphereGeometry(0.15, 16, 16);
                const noseMaterial = new THREE.MeshPhongMaterial({ color: 0xFF4444 });
                const nose = new THREE.Mesh(noseGeometry, noseMaterial);
                nose.position.set(0, 1.5, 0.7);
                this.pet.add(nose);

                // –£—à–∏
                this.createEars();

                // –ö—Ä—ã–ª—å—è
                this.createWings();

                // –õ–∞–ø–∫–∏
                this.createPaws();

                // –•–≤–æ—Å—Ç–∏–∫ —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π
                this.createTail();

                this.scene.add(this.pet);

                // –°–æ–∑–¥–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏–∏
                this.setupAnimations();
            }

            createEyes() {
                const eyeGeometry = new THREE.SphereGeometry(0.2, 16, 16);
                const eyeMaterial = new THREE.MeshPhongMaterial({ color: 0x000000 });

                // –û—Å–Ω–æ–≤–Ω—ã–µ –≥–ª–∞–∑–∞
                const leftEye = new THREE.Mesh(eyeGeometry, eyeMaterial);
                leftEye.position.set(-0.25, 1.6, 0.6);

                const rightEye = new THREE.Mesh(eyeGeometry, eyeMaterial);
                rightEye.position.set(0.25, 1.6, 0.6);

                // –ë–ª–µ—Å–∫ –≤ –≥–ª–∞–∑–∞—Ö
                const sparkleGeometry = new THREE.SphereGeometry(0.06, 8, 8);
                const sparkleMaterial = new THREE.MeshPhongMaterial({ color: 0xFFFFFF });

                const leftSparkle = new THREE.Mesh(sparkleGeometry, sparkleMaterial);
                leftSparkle.position.set(-0.2, 1.65, 0.68);

                const rightSparkle = new THREE.Mesh(sparkleGeometry, sparkleMaterial);
                rightSparkle.position.set(0.2, 1.65, 0.68);

                // –í–µ–∫–∏ –¥–ª—è –º–æ—Ä–≥–∞–Ω–∏—è
                const lidGeometry = new THREE.SphereGeometry(0.22, 16, 16, 0, Math.PI);
                const lidMaterial = new THREE.MeshPhongMaterial({ color: 0xFF6B6B });

                const leftLid = new THREE.Mesh(lidGeometry, lidMaterial);
                leftLid.position.set(-0.25, 1.6, 0.59);
                leftLid.rotation.x = Math.PI;
                this.leftLid = leftLid;

                const rightLid = new THREE.Mesh(lidGeometry, lidMaterial);
                rightLid.position.set(0.25, 1.6, 0.59);
                rightLid.rotation.x = Math.PI;
                this.rightLid = rightLid;

                this.pet.add(leftEye);
                this.pet.add(rightEye);
                this.pet.add(leftSparkle);
                this.pet.add(rightSparkle);
                this.pet.add(leftLid);
                this.pet.add(rightLid);
            }

            createEars() {
                const earGeometry = new THREE.ConeGeometry(0.2, 0.8, 8);
                const earMaterial = new THREE.MeshPhongMaterial({ color: 0xFF6B6B });

                const leftEar = new THREE.Mesh(earGeometry, earMaterial);
                leftEar.position.set(-0.5, 2.0, 0);
                leftEar.rotation.z = -0.3;

                const rightEar = new THREE.Mesh(earGeometry, earMaterial);
                rightEar.position.set(0.5, 2.0, 0);
                rightEar.rotation.z = 0.3;

                this.pet.add(leftEar);
                this.pet.add(rightEar);
                this.leftEar = leftEar;
                this.rightEar = rightEar;
            }

            createWings() {
                const wingGeometry = new THREE.PlaneGeometry(0.8, 0.5);
                const wingMaterial = new THREE.MeshPhongMaterial({
                    color: 0xFF8E8E,
                    side: THREE.DoubleSide
                });

                const leftWing = new THREE.Mesh(wingGeometry, wingMaterial);
                leftWing.position.set(-1, 1, 0);
                leftWing.rotation.y = Math.PI / 2;

                const rightWing = new THREE.Mesh(wingGeometry, wingMaterial);
                rightWing.position.set(1, 1, 0);
                rightWing.rotation.y = -Math.PI / 2;

                this.pet.add(leftWing);
                this.pet.add(rightWing);
                this.leftWing = leftWing;
                this.rightWing = rightWing;
            }

            createPaws() {
                const pawGeometry = new THREE.SphereGeometry(0.15, 16, 16);
                const pawMaterial = new THREE.MeshPhongMaterial({ color: 0xFF6B6B });

                // –ü–µ—Ä–µ–¥–Ω–∏–µ –ª–∞–ø–∫–∏
                const leftFrontPaw = new THREE.Mesh(pawGeometry, pawMaterial);
                leftFrontPaw.position.set(-0.4, 0.3, 0.8);

                const rightFrontPaw = new THREE.Mesh(pawGeometry, pawMaterial);
                rightFrontPaw.position.set(0.4, 0.3, 0.8);

                // –ó–∞–¥–Ω–∏–µ –ª–∞–ø–∫–∏
                const leftBackPaw = new THREE.Mesh(pawGeometry, pawMaterial);
                leftBackPaw.position.set(-0.3, -0.8, 0.3);

                const rightBackPaw = new THREE.Mesh(pawGeometry, pawMaterial);
                rightBackPaw.position.set(0.3, -0.8, 0.3);

                this.pet.add(leftFrontPaw);
                this.pet.add(rightFrontPaw);
                this.pet.add(leftBackPaw);
                this.pet.add(rightBackPaw);
            }

            createTail() {
                const tailGeometry = new THREE.CylinderGeometry(0.1, 0.05, 1.2, 8);
                const tailMaterial = new THREE.MeshPhongMaterial({ color: 0xFF6B6B });
                const tail = new THREE.Mesh(tailGeometry, tailMaterial);
                tail.position.set(0, -0.5, -0.2);
                tail.rotation.x = Math.PI / 3;
                this.pet.add(tail);
                this.tail = tail;
            }

            setupAnimations() {
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Å—ã–ª–∫–∏ –Ω–∞ –∞–Ω–∏–º–∏—Ä—É–µ–º—ã–µ —á–∞—Å—Ç–∏
                this.animatedParts = {
                    body: this.pet.children[0],
                    head: this.pet.children[1],
                    leftEar: this.leftEar,
                    rightEar: this.rightEar,
                    leftWing: this.leftWing,
                    rightWing: this.rightWing,
                    tail: this.tail,
                    leftLid: this.leftLid,
                    rightLid: this.rightLid
                };
            }

            playAnimation(animationName, mood) {
                this.currentAnimation = animationName;

                switch (animationName) {
                    case 'idle':
                        this.idleAnimation();
                        break;
                    case 'eat':
                        this.eatAnimation();
                        break;
                    case 'play':
                        this.playfulAnimation();
                        break;
                    case 'sleep':
                        this.sleepAnimation();
                        break;
                    case 'clean':
                        this.cleanAnimation();
                        break;
                }

                // –ú–æ—Ä–≥–∞–Ω–∏–µ
                this.blinkAnimation();
            }

            idleAnimation() {
                const time = this.clock.getElapsedTime();
                this.pet.position.y = Math.sin(time * 2) * 0.1;
                this.pet.rotation.y = Math.sin(time * 0.5) * 0.1;
                this.tail.rotation.x = Math.PI / 3 + Math.sin(time * 3) * 0.2;
            }

            eatAnimation() {
                const time = this.clock.getElapsedTime();
                this.animatedParts.head.rotation.x = Math.sin(time * 8) * 0.1;
                this.pet.position.y = Math.sin(time * 10) * 0.05;
            }

            playfulAnimation() {
                const time = this.clock.getElapsedTime();
                this.pet.position.y = Math.sin(time * 8) * 0.3;
                this.pet.rotation.y = time * 2;
                this.tail.rotation.x = Math.PI / 3 + Math.sin(time * 10) * 0.3;
                this.leftWing.rotation.z = Math.sin(time * 5) * 0.5;
                this.rightWing.rotation.z = -Math.sin(time * 5) * 0.5;
            }

            sleepAnimation() {
                const time = this.clock.getElapsedTime();
                this.pet.rotation.x = 0.3;
                this.pet.position.y = -0.2 + Math.sin(time * 0.5) * 0.05;
                // –ó–∞–∫—Ä—ã—Ç—ã–µ –≥–ª–∞–∑–∞
                this.leftLid.position.z = 0.65;
                this.rightLid.position.z = 0.65;
            }

            cleanAnimation() {
                const time = this.clock.getElapsedTime();
                this.pet.rotation.y = Math.sin(time * 6) * 0.5;
                this.tail.rotation.x = Math.PI / 3 + Math.sin(time * 8) * 0.4;
            }

            blinkAnimation() {
                const time = this.clock.getElapsedTime();
                // –ú–æ—Ä–≥–∞–Ω–∏–µ –∫–∞–∂–¥—ã–µ 3-5 —Å–µ–∫—É–Ω–¥
                if (Math.sin(time * 0.5) > 0.9 && this.currentAnimation !== 'sleep') {
                    this.leftLid.position.z = 0.65;
                    this.rightLid.position.z = 0.65;
                    setTimeout(() => {
                        this.leftLid.position.z = 0.59;
                        this.rightLid.position.z = 0.59;
                    }, 200);
                }
            }

            createEnvironment() {
                // –ü—Ä–æ—Å—Ç–∞—è —Ç—Ä–∞–≤–∞
                const grassGeometry = new THREE.PlaneGeometry(20, 10);
                const grassMaterial = new THREE.MeshPhongMaterial({
                    color: 0x7CB342,
                    side: THREE.DoubleSide
                });
                const grass = new THREE.Mesh(grassGeometry, grassMaterial);
                grass.rotation.x = -Math.PI / 2;
                grass.position.y = -2;
                grass.receiveShadow = true;
                this.scene.add(grass);
            }

            animate() {
                requestAnimationFrame(() => this.animate());

                if (this.currentAnimation) {
                    this.playAnimation(this.currentAnimation);
                }

                this.renderer.render(this.scene, this.camera);
            }

            onWindowResize() {
                this.camera.aspect = window.innerWidth / window.innerHeight;
                this.camera.updateProjectionMatrix();
                this.renderer.setSize(window.innerWidth, window.innerHeight);
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        const pet = new AnimatedPet();
        const scene = new AdvancedPetScene();

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function updateDisplay() {
            document.getElementById('hunger').textContent = Math.round(pet.stats.hunger);
            document.getElementById('happiness').textContent = Math.round(pet.stats.happiness);
            document.getElementById('energy').textContent = Math.round(pet.stats.energy);
            document.getElementById('cleanliness').textContent = Math.round(pet.stats.cleanliness);

            document.getElementById('mood').textContent = pet.getMoodEmoji();

            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é —Å—Ü–µ–Ω—ã
            scene.playAnimation(pet.currentAction, pet.mood);
        }

        // –î–µ–π—Å—Ç–≤–∏—è
        function feed() {
            pet.performAction('feed');
            scene.playAnimation('eat', pet.mood);
            updateDisplay();
        }

        function play() {
            pet.performAction('play');
            scene.playAnimation('play', pet.mood);
            updateDisplay();
        }

        function sleep() {
            pet.performAction('sleep');
            scene.playAnimation('sleep', pet.mood);
            updateDisplay();
        }

        function clean() {
            pet.performAction('clean');
            scene.playAnimation('clean', pet.mood);
            updateDisplay();
        }

        // –ì–ª–∞–≤–Ω—ã–π –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
        setInterval(() => {
            pet.updateStats();
            updateDisplay();
        }, 2000);

        // –ù–∞—á–∞–ª—å–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è
        scene.playAnimation('idle', 'happy');
        pet.showThought("–ü—Ä–∏–≤–µ—Ç! –Ø –º–∞–ª–µ–Ω—å–∫–∏–π –¥—Ä–∞–∫–æ—à–∞! üê≤");

    </script>
</body>

</html>