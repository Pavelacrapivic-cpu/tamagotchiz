<!DOCTYPE html>
<html>

<head>
    <title>‚ú® –ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –ü–∏—Ç–æ–º–µ—Ü 3D</title>
    <meta charset="UTF-8">
    <style>
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
            color: white;
            font-family: 'Arial', sans-serif;
            overflow: hidden;
        }

        #container {
            position: relative;
            width: 100vw;
            height: 100vh;
        }

        #ui {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 100;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 25px;
            border-radius: 20px;
            border: 2px solid rgba(78, 205, 196, 0.5);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            max-width: 320px;
        }

        .stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 20px;
        }

        .stat {
            padding: 12px;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        button {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            border: none;
            padding: 14px;
            border-radius: 12px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        button:active {
            transform: translateY(0);
        }

        #mood {
            font-size: 32px;
            text-align: center;
            margin: 15px 0;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
        }

        .title {
            text-align: center;
            margin-bottom: 15px;
            font-size: 24px;
            background: linear-gradient(45deg, #4ecdc4, #ff6b6b);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            color: transparent;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }
    </style>
</head>

<body>
    <div class="particles" id="particles"></div>
    <div id="container">
        <div id="ui">
            <div class="title">üåü –ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –ü–∏—Ç–æ–º–µ—Ü üåü</div>
            <div id="mood">üëΩ</div>
            <div class="stats">
                <div class="stat">üçñ: <span id="hunger">50</span>%</div>
                <div class="stat">üòä: <span id="happiness">70</span>%</div>
                <div class="stat">üí§: <span id="energy">80</span>%</div>
                <div class="stat">‚ú®: <span id="cleanliness">60</span>%</div>
            </div>
            <div class="buttons">
                <button onclick="feed()">üçñ –ü–æ–∫–æ—Ä–º–∏—Ç—å</button>
                <button onclick="play()">üéÆ –ò–≥—Ä–∞—Ç—å</button>
                <button onclick="sleep()">üí§ –°–ø–∞—Ç—å</button>
                <button onclick="clean()">‚ú® –ß–∏—Å—Ç–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        // –°–∏—Å—Ç–µ–º–∞ –ø–∏—Ç–æ–º—Ü–∞
        class CosmicPet3D {
            constructor() {
                this.hunger = 50;
                this.happiness = 70;
                this.energy = 80;
                this.cleanliness = 60;
                this.lastUpdate = Date.now();
                this.mood = 'happy';
                this.animation = 'idle';
            }

            update() {
                const now = Date.now();
                const hoursPassed = (now - this.lastUpdate) / (1000 * 60 * 60);

                if (hoursPassed > 0.1) {
                    this.hunger = Math.max(0, this.hunger - 8 * hoursPassed);
                    this.happiness = Math.max(0, this.happiness - 6 * hoursPassed);
                    this.energy = Math.max(0, this.energy - 7 * hoursPassed);
                    this.cleanliness = Math.max(0, this.cleanliness - 5 * hoursPassed);
                    this.lastUpdate = now;
                }
                this.updateMood();
            }

            updateMood() {
                if (this.hunger < 20) {
                    this.mood = 'hungry';
                    this.animation = 'sad';
                } else if (this.energy < 20) {
                    this.mood = 'sleepy';
                    this.animation = 'sleep';
                } else if (this.happiness > 70) {
                    this.mood = 'happy';
                    this.animation = 'happy';
                } else {
                    this.mood = 'normal';
                    this.animation = 'idle';
                }
            }

            feed() {
                this.hunger = Math.min(100, this.hunger + 30);
                this.cleanliness = Math.max(0, this.cleanliness - 5);
                this.animation = 'eat';
                setTimeout(() => this.updateMood(), 2000);
            }

            play() {
                this.happiness = Math.min(100, this.happiness + 25);
                this.energy = Math.max(0, this.energy - 15);
                this.animation = 'play';
                setTimeout(() => this.updateMood(), 2000);
            }

            sleep() {
                this.energy = Math.min(100, this.energy + 40);
                this.hunger = Math.max(0, this.hunger - 10);
                this.animation = 'sleep';
                setTimeout(() => this.updateMood(), 3000);
            }

            clean() {
                this.cleanliness = Math.min(100, this.cleanliness + 35);
                this.happiness = Math.min(100, this.happiness + 10);
                this.animation = 'clean';
                setTimeout(() => this.updateMood(), 2000);
            }
        }

        // 3D —Å—Ü–µ–Ω–∞ —Å —É–ª—É—á—à–µ–Ω–Ω–æ–π –≥—Ä–∞—Ñ–∏–∫–æ–π
        class Game3D {
            constructor() {
                this.scene = new THREE.Scene();
                this.camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
                this.renderer = new THREE.WebGLRenderer({
                    antialias: true,
                    alpha: true
                });
                this.pet = new THREE.Group();
                this.animationMixer = null;
                this.currentAction = null;

                this.init();
            }

            init() {
                // –†–µ–Ω–¥–µ—Ä–µ—Ä
                this.renderer.setSize(window.innerWidth, window.innerHeight);
                this.renderer.setClearColor(0x000000, 0);
                this.renderer.shadowMap.enabled = true;
                this.renderer.shadowMap.type = THREE.PCFSoftShadowMap;
                document.getElementById('container').appendChild(this.renderer.domElement);

                // –ö–∞–º–µ—Ä–∞
                this.camera.position.set(0, 0, 8);

                // –û—Å–≤–µ—â–µ–Ω–∏–µ
                this.setupLighting();

                // –°–æ–∑–¥–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ –ø–∏—Ç–æ–º—Ü–∞
                this.createUniquePet();

                // –ß–∞—Å—Ç–∏—Ü—ã
                this.createParticles();

                this.animate();
                window.addEventListener('resize', () => this.onWindowResize());
            }

            setupLighting() {
                // –û—Å–Ω–æ–≤–Ω–æ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ
                const ambientLight = new THREE.AmbientLight(0x404040, 0.6);
                this.scene.add(ambientLight);

                // –ö–ª—é—á–µ–≤–æ–π —Å–≤–µ—Ç
                const mainLight = new THREE.DirectionalLight(0x4ecdc4, 1);
                mainLight.position.set(5, 5, 5);
                mainLight.castShadow = true;
                this.scene.add(mainLight);

                // –ó–∞–ø–æ–ª–Ω—è—é—â–∏–π —Å–≤–µ—Ç
                const fillLight = new THREE.DirectionalLight(0xff6b6b, 0.3);
                fillLight.position.set(-5, 3, 2);
                this.scene.add(fillLight);

                // –°–≤–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è
                this.moodLight = new THREE.PointLight(0x4ecdc4, 1, 12);
                this.moodLight.position.set(0, 3, 3);
                this.scene.add(this.moodLight);
            }

            createUniquePet() {
                // –û—Å–Ω–æ–≤–Ω–æ–µ —Ç–µ–ª–æ (–∫–∞–ø–ª–µ–≤–∏–¥–Ω–∞—è —Ñ–æ—Ä–º–∞)
                const bodyGeometry = new THREE.SphereGeometry(1, 32, 32);
                bodyGeometry.scale(1, 1.2, 0.8); // –í—ã—Ç—è–Ω—É—Ç–∞—è —Ñ–æ—Ä–º–∞

                const bodyMaterial = new THREE.MeshPhongMaterial({
                    color: 0x4ecdc4,
                    shininess: 100,
                    transparent: true,
                    opacity: 0.9
                });

                const body = new THREE.Mesh(bodyGeometry, bodyMaterial);
                body.castShadow = true;
                this.pet.add(body);

                // –ë–æ–ª—å—à–∏–µ –≤—ã—Ä–∞–∑–∏—Ç–µ–ª—å–Ω—ã–µ –≥–ª–∞–∑–∞
                const eyeGeometry = new THREE.SphereGeometry(0.2, 16, 16);
                const eyeMaterial = new THREE.MeshPhongMaterial({ color: 0x000000 });

                const leftEye = new THREE.Mesh(eyeGeometry, eyeMaterial);
                leftEye.position.set(-0.4, 0.3, 0.8);

                const rightEye = new THREE.Mesh(eyeGeometry, eyeMaterial);
                rightEye.position.set(0.4, 0.3, 0.8);

                // –ë–ª–µ—Å–∫ –≤ –≥–ª–∞–∑–∞—Ö
                const sparkleGeometry = new THREE.SphereGeometry(0.05, 8, 8);
                const sparkleMaterial = new THREE.MeshPhongMaterial({ color: 0xffffff });

                const leftSparkle = new THREE.Mesh(sparkleGeometry, sparkleMaterial);
                leftSparkle.position.set(-0.3, 0.4, 0.9);

                const rightSparkle = new THREE.Mesh(sparkleGeometry, sparkleMaterial);
                rightSparkle.position.set(0.3, 0.4, 0.9);

                // –ú–∏–ª—ã–π —Ä–æ—Ç–∏–∫
                const mouthGeometry = new THREE.TorusGeometry(0.15, 0.03, 8, 16, Math.PI);
                const mouthMaterial = new THREE.MeshPhongMaterial({ color: 0xff6b6b });
                const mouth = new THREE.Mesh(mouthGeometry, mouthMaterial);
                mouth.position.set(0, -0.1, 0.8);
                mouth.rotation.x = Math.PI / 2;

                // –î–ª–∏–Ω–Ω—ã–µ —É—à–∏-–∞–Ω—Ç–µ–Ω–Ω—ã
                const earGeometry = new THREE.ConeGeometry(0.15, 1, 8);
                const earMaterial = new THREE.MeshPhongMaterial({ color: 0x4ecdc4 });

                const leftEar = new THREE.Mesh(earGeometry, earMaterial);
                leftEar.position.set(-0.6, 0.8, 0);
                leftEar.rotation.z = -0.4;

                const rightEar = new THREE.Mesh(earGeometry, earMaterial);
                rightEar.position.set(0.6, 0.8, 0);
                rightEar.rotation.z = 0.4;

                // –•–≤–æ—Å—Ç–∏–∫
                const tailGeometry = new THREE.ConeGeometry(0.1, 0.8, 8);
                const tail = new THREE.Mesh(tailGeometry, earMaterial);
                tail.position.set(0, -0.9, 0);
                tail.rotation.x = Math.PI;

                // –°–±–æ—Ä–∫–∞
                this.pet.add(leftEye);
                this.pet.add(rightEye);
                this.pet.add(leftSparkle);
                this.pet.add(rightSparkle);
                this.pet.add(mouth);
                this.pet.add(leftEar);
                this.pet.add(rightEar);
                this.pet.add(tail);

                this.scene.add(this.pet);
            }

            createParticles() {
                const particleCount = 100;
                const particles = new THREE.BufferGeometry();
                const positions = new Float32Array(particleCount * 3);

                for (let i = 0; i < particleCount * 3; i++) {
                    positions[i] = (Math.random() - 0.5) * 50;
                }

                particles.setAttribute('position', new THREE.BufferAttribute(positions, 3));

                const particleMaterial = new THREE.PointsMaterial({
                    color: 0x4ecdc4,
                    size: 0.1,
                    transparent: true,
                    opacity: 0.6
                });

                const particleSystem = new THREE.Points(particles, particleMaterial);
                this.scene.add(particleSystem);
                this.particles = particleSystem;
            }

            updatePet(mood, animation) {
                // –ê–Ω–∏–º–∞—Ü–∏–∏
                if (!this.pet) return;

                // –°–±—Ä–æ—Å
                this.pet.rotation.x = 0;
                this.pet.rotation.y = 0;
                this.pet.position.y = 0;
                this.pet.scale.set(1, 1, 1);

                // –¶–≤–µ—Ç –∏ –∞–Ω–∏–º–∞—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—é
                switch (mood) {
                    case 'happy':
                        this.pet.rotation.y = Math.sin(Date.now() * 0.003) * 0.5;
                        this.pet.position.y = Math.sin(Date.now() * 0.005) * 0.3;
                        this.moodLight.color.setHex(0x4ecdc4);
                        break;
                    case 'hungry':
                        this.pet.rotation.x = 0.1;
                        this.pet.position.y = -0.2;
                        this.moodLight.color.setHex(0xff6b6b);
                        break;
                    case 'sleepy':
                        this.pet.rotation.x = 0.3;
                        this.moodLight.color.setHex(0x45b7d1);
                        break;
                    default:
                        this.pet.rotation.y = Math.sin(Date.now() * 0.002) * 0.2;
                        this.moodLight.color.setHex(0x4ecdc4);
                }

                // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –¥–µ–π—Å—Ç–≤–∏–π
                switch (animation) {
                    case 'eat':
                        this.pet.rotation.x = Math.sin(Date.now() * 0.01) * 0.2;
                        break;
                    case 'play':
                        this.pet.rotation.y = Date.now() * 0.004;
                        this.pet.position.y = Math.sin(Date.now() * 0.01) * 0.4;
                        break;
                    case 'sleep':
                        this.pet.rotation.x = 0.5;
                        this.pet.scale.set(0.9, 0.9, 0.9);
                        break;
                }

                // –ê–Ω–∏–º–∞—Ü–∏—è —á–∞—Å—Ç–∏—Ü
                if (this.particles) {
                    this.particles.rotation.y += 0.001;
                }
            }

            animate() {
                requestAnimationFrame(() => this.animate());
                this.renderer.render(this.scene, this.camera);
            }

            onWindowResize() {
                this.camera.aspect = window.innerWidth / window.innerHeight;
                this.camera.updateProjectionMatrix();
                this.renderer.setSize(window.innerWidth, window.innerHeight);
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        const pet = new CosmicPet3D();
        const game3d = new Game3D();

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function updateDisplay() {
            document.getElementById('hunger').textContent = Math.round(pet.hunger);
            document.getElementById('happiness').textContent = Math.round(pet.happiness);
            document.getElementById('energy').textContent = Math.round(pet.energy);
            document.getElementById('cleanliness').textContent = Math.round(pet.cleanliness);

            const moodEmoji = {
                'happy': 'üòä',
                'hungry': 'üçñ',
                'sleepy': 'üí§',
                'normal': 'üëΩ'
            };
            document.getElementById('mood').textContent = moodEmoji[pet.mood] || 'üëΩ';

            game3d.updatePet(pet.mood, pet.animation);
        }

        // –î–µ–π—Å—Ç–≤–∏—è
        function feed() { pet.feed(); updateDisplay(); }
        function play() { pet.play(); updateDisplay(); }
        function sleep() { pet.sleep(); updateDisplay(); }
        function clean() { pet.clean(); updateDisplay(); }

        // –ì–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª
        setInterval(() => {
            pet.update();
            updateDisplay();
        }, 1000);

        // –ß–∞—Å—Ç–∏—Ü—ã –¥–ª—è —Ñ–æ–Ω–∞
        function createParticles() {
            const container = document.getElementById('particles');
            for (let i = 0; i < 50; i++) {
                const particle = document.createElement('div');
                particle.style.cssText = `
                    position: absolute;
                    width: ${Math.random() * 3 + 1}px;
                    height: ${Math.random() * 3 + 1}px;
                    background: rgba(78, 205, 196, ${Math.random() * 0.5});
                    border-radius: 50%;
                    left: ${Math.random() * 100}%;
                    top: ${Math.random() * 100}%;
                    animation: float ${Math.random() * 10 + 5}s infinite linear;
                `;
                container.appendChild(particle);
            }

            const style = document.createElement('style');
            style.textContent = `
                @keyframes float {
                    0% { transform: translateY(0) rotate(0deg); opacity: 0; }
                    10% { opacity: 1; }
                    90% { opacity: 1; }
                    100% { transform: translateY(-100vh) rotate(360deg); opacity: 0; }
                }
            `;
            document.head.appendChild(style);
        }

        createParticles();
        updateDisplay();
    </script>
</body>

</html>